---
// Features section for 1Panel website
import { Icon } from 'astro-icon/components'
---

<section id="features" class="section-padding bg-gradient-to-br from-gray-50 to-white">
  <div class="container-custom">
    <!-- Section Header -->
    <div class="text-center mb-20">
      <h2 class="fade-in-up text-4xl lg:text-5xl font-bold text-gray-800 mb-6">
        Powerful
        <span class="text-1panel-gradient">Features</span>
      </h2>
      <p class="fade-in-up text-xl text-gray-600 max-w-3xl mx-auto" style="animation-delay: 0.2s;">
        Comprehensive Linux server management features,<br>making operations simple and efficient
      </p>
    </div>

    <!-- Feature 1: High Efficiency Management -->
    <div class="mb-32">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-12 items-center">
        <!-- Content -->
        <div class="fade-in-left order-2 lg:order-1 lg:col-span-2">
          <div class="flex items-center mb-6">
            <h3 class="text-3xl font-bold text-gray-800">Efficient Management</h3>
          </div>
          <p class="text-lg text-gray-600 mb-8 leading-relaxed">
            Through a user-friendly web graphical interface, 1Panel enables users to effortlessly manage their Linux servers. Key features include host monitoring, file management, database administration, container management, LLMs management.
          </p>
          <div class="grid grid-cols-1 gap-4">
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer active" data-feature="monitoring">
              <Icon name="mdi:chart-multiline" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Real-time System Monitoring</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="files">
              <Icon name="carbon:volume-file-storage" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Web File Manager</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="database">
              <Icon name="carbon:db2-database" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Database Visual Management</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="containers">
              <!-- Containers: Docker logo icon -->
              <Icon name="mdi:docker" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Docker Management</span>
            </div>
          </div>
        </div>
        <!-- Image Carousel -->
        <div class="fade-in-right order-1 lg:order-2 lg:col-span-3">
          <div class="relative group">
            <div class="relative bg-white rounded-lg shadow-2xl overflow-hidden transform group-hover:scale-105 transition-transform duration-700">
              <!-- Carousel Container -->
              <div class="carousel-container relative overflow-hidden" style="min-height: 400px;">
                <!-- Image 1: System Monitoring -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500" data-feature="monitoring">
                  <img 
                    src="./images/f1.png" 
                    alt="1Panel 系统监控界面" 
                    class="w-full h-full"
                    loading="lazy"
                  />
                </div>
                <!-- Image 2: File Management -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="files">
                  <img 
                    src="./images/f2.png" 
                    alt="1Panel 文件管理界面" 
                    class="w-full h-full"
                    loading="lazy"
                  />
                </div>
                <!-- Image 3: Database Management -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="database">
                  <img 
                    src="./images/f3.png" 
                    alt="1Panel 数据库管理界面" 
                    class="w-full h-full"
                    loading="lazy"
                  />
                </div>
                <!-- Image 4: Container Management -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="containers">
                  <img 
                    src="./images/f4.png" 
                    alt="1Panel 容器管理界面" 
                    class="w-full h-full"
                    loading="lazy"
                  />
                </div>
              </div>
              
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Feature 2: Quick Website Deployment -->
    <div class="mb-32">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-12 items-center">
        <!-- Image Carousel -->
        <div class="fade-in-left order-2 lg:order-1 lg:col-span-3">
          <div class="relative group">
            <div class="relative bg-white rounded-lg shadow-2xl overflow-hidden transform group-hover:scale-105 transition-transform duration-700">
              <!-- Carousel Container -->
              <div class="carousel-container relative overflow-hidden" style="min-height: 400px;">
                <!-- Image 1: WordPress Deployment -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500" data-feature="wordpress">
                  <img 
                    src="./images/f5.png" 
                    alt="1Panel WordPress部署界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 2: SSL Certificate -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="ssl">
                  <img 
                    src="./images/f6.png" 
                    alt="1Panel SSL证书管理界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 3: Domain Management -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="domain">
                  <img 
                    src="./images/f7.png" 
                    alt="1Panel 网站管理界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 4: Multi-site Management -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="multisite">
                  <img 
                    src="./images/f8.png" 
                    alt="1Panel 多站点管理界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
              </div>
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
            </div>
          </div>
        </div>
        <!-- Content -->
        <div class="fade-in-right order-1 lg:order-2 lg:col-span-2">
          <div class="flex items-center mb-6">
            <h3 class="text-3xl font-bold text-gray-800">Rapid Website Deployment</h3>
          </div>
          <p class="text-lg text-gray-600 mb-8 leading-relaxed">
            With deep integration of the popular open-source website building software WordPress, 1Panel streamlines the process of domain binding and SSL certificate configuration, all achievable with just one click.
          </p>
          <div class="grid grid-cols-1 gap-4">
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer active" data-feature="wordpress">
              <Icon name="mdi:wordpress" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">One-click WordPress Deployment</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="ssl">
              <Icon name="carbon:security" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Automatic SSL Certificate Application</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="domain">
              <Icon name="carbon:dns-services" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Domain Management and Configuration</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="multisite">
              <Icon name="carbon:web-services-service" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Multi-site Management</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Feature 3: App Store -->
    <div class="mb-32">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-12 items-center">
        <!-- Content -->
        <div class="fade-in-left order-2 lg:order-1 lg:col-span-2">
          <div class="flex items-center mb-6">
            <h3 class="text-3xl font-bold text-gray-800">App Store</h3>
          </div>
          <p class="text-lg text-gray-600 mb-8 leading-relaxed">
            1Panel curates a wide range of high-quality open-source tools and applications, facilitating easy installation and updates for its users.
          </p>
          <div class="grid grid-cols-1 gap-4">
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer active" data-feature="store">
              <Icon name="carbon:application" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Curated Open-source Applications</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="install">
              <Icon name="carbon:deploy" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">One-click Installation and Deployment</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="updates">
              <Icon name="carbon:update-now" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Automatic Update Management</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="management">
              <Icon name="carbon:data-backup" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Data Backup and Recovery</span>
            </div>
          </div>
        </div>
        <!-- Image Carousel -->
        <div class="fade-in-right order-1 lg:order-2 lg:col-span-3">
          <div class="relative group">
            <div class="relative bg-white rounded-lg shadow-2xl overflow-hidden transform group-hover:scale-105 transition-transform duration-700">
              <!-- Carousel Container -->
              <div class="carousel-container relative overflow-hidden" style="min-height: 400px;">
                <!-- Image 1: App Store Overview -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500" data-feature="store">
                  <img 
                    src="./images/f9.png" 
                    alt="1Panel 应用商店界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 2: App Installation -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="install">
                  <img 
                    src="./images/f10.png" 
                    alt="1Panel 应用安装界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 3: App Updates -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="updates">
                  <img 
                    src="./images/f11.png" 
                    alt="1Panel 应用更新界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 4: App Management -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="management">
                  <img 
                    src="./images/f12.png" 
                    alt="1Panel 应用管理界面" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
              </div>
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Feature 4: AI-Powered Management -->
    <div class="mb-32">
      <div class="grid grid-cols-1 lg:grid-cols-5 gap-12 items-center">
        <!-- Image Carousel -->
        <div class="fade-in-left order-1 lg:order-1 lg:col-span-3">
          <div class="relative group">
            <div class="relative bg-white rounded-lg shadow-2xl overflow-hidden transform group-hover:scale-105 transition-transform duration-700">
              <!-- Carousel Container -->
              <div class="carousel-container relative overflow-hidden" style="min-height: 400px;">
                <!-- Image 1: AI Chat Interface -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500" data-feature="ai-chat">
                  <img 
                    src="./images/f13.png" 
                    alt="1Panel LLM Management" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 2: AI Diagnosis -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="ai-diagnosis">
                  <img 
                    src="./images/f14.png" 
                    alt="1Panel MCP Server Management" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
                <!-- Image 3: AI Optimization -->
                <div class="carousel-slide absolute inset-0 transition-opacity duration-500 opacity-0" data-feature="ai-optimization">
                  <img 
                    src="./images/f15.png" 
                    alt="1Panel GPU Monitoring" 
                    class="w-full h-full object-fill"
                    loading="lazy"
                  />
                </div>
              </div>
              <div class="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
            </div>
          </div>
        </div>
        <!-- Content -->
        <div class="fade-in-right order-2 lg:order-2 lg:col-span-2">
          <div class="flex items-center mb-6">
            <h3 class="text-3xl font-bold text-gray-800">AI-Powered Management</h3>
          </div>
          <p class="text-lg text-gray-600 mb-8 leading-relaxed">
            Integrate large language models to provide an intelligent server management experience. Through AI assistants, quickly diagnose problems, optimize configurations, and provide operational suggestions, making management more intelligent and efficient.
          </p>
          <div class="grid grid-cols-1 gap-4">
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer active" data-feature="ai-chat">
              <Icon name="carbon:ai" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">Local LLM Management</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="ai-diagnosis">
              <Icon name="codicon:mcp" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">MCP Server Management</span>
            </div>
            <div class="feature-item flex items-center p-4 bg-white rounded-lg border border-gray-200 hover:border-1panel transition-all duration-300 cursor-pointer" data-feature="ai-optimization">
              <Icon name="mdi:gpu" class="w-5 h-5 mr-3 text-1panel" />
              <span class="text-gray-700 font-medium">GPU Monitoring</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Additional Features Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
      <!-- Backup & Recovery -->
      <div class="fade-in-up card group hover:scale-105 transition-transform duration-300" style="animation-delay: 0.8s;">
        <div class="flex items-start space-x-4">
          <div class="w-16 h-16 rounded-xl flex items-center justify-center bg-1panel-gradient group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
            </svg>
          </div>
          <div class="flex-1">
            <h3 class="text-xl font-bold text-gray-800 mb-2">One-click Backup</h3>
            <p class="text-gray-600 leading-relaxed">Support data backup to various cloud storage media, and support recovery function, ensuring data is never lost.</p>
          </div>
        </div>
      </div>
      <div class="fade-in-up card group hover:scale-105 transition-transform duration-300" style="animation-delay: 1s;">
        <div class="flex items-start space-x-4">
          <div class="w-16 h-16 rounded-xl flex items-center justify-center bg-1panel-gradient group-hover:scale-110 transition-transform duration-300 flex-shrink-0">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
            </svg>
          </div>
          <div class="flex-1">
            <h3 class="text-xl font-bold text-gray-800 mb-2">Secure and Reliable</h3>
            <p class="text-gray-600 leading-relaxed">1Panel effectively reduces vulnerability exposure, provides virus protection, firewall, and log audit functions, ensuring system security.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes pulse {
    0%, 100% {
      opacity: 0.3;
      transform: scale(1);
    }
    50% {
      opacity: 0.6;
      transform: scale(1.1);
    }
  }

  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Feature item active state */
  .feature-item.active {
    background-color: #f0f7ff;
    border-color: #005eeb;
    box-shadow: 0 4px 12px rgba(0, 94, 235, 0.15);
  }

  .feature-item.active span {
    color: #005eeb;
    font-weight: 600;
  }

  .feature-item:hover {
    transform: translateY(-2px);
  }
</style>

<script>
  // Intersection Observer for animation triggers
  document.addEventListener('DOMContentLoaded', function() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate');
        }
      });
    }, { threshold: 0.1 });

    // Observe all animated elements
    document.querySelectorAll('.fade-in-up, .fade-in-left, .fade-in-right').forEach(el => {
      observer.observe(el);
    });

    // Feature Carousel Functionality
    class FeatureCarousel {
      private container: Element;
      private slides: NodeListOf<HTMLElement>;
      private currentIndex: number;
      private autoPlayInterval: number | null;
      private autoPlayDelay: number;
      private featureItems: NodeListOf<HTMLElement>;
      private carouselId: string;

      constructor(container: Element) {
        this.container = container;
        this.slides = container.querySelectorAll('.carousel-slide') as NodeListOf<HTMLElement>;
        
        // Generate unique ID for this carousel
        this.carouselId = 'carousel-' + Math.random().toString(36).substr(2, 9);
        this.container.setAttribute('data-carousel-id', this.carouselId);
        
        // Find feature items in the same feature section
        const featureSection = this.container.closest('.mb-32');
        this.featureItems = featureSection?.querySelectorAll('.feature-item') || document.querySelectorAll('');
        
        this.currentIndex = 0;
        this.autoPlayInterval = null;
        this.autoPlayDelay = 4000; // 4 seconds
        
        this.init();
      }

      init() {
        // Add click event listeners to feature items
        this.featureItems.forEach((item: HTMLElement, index: number) => {
          item.addEventListener('click', () => {
            this.goToSlide(index);
            this.updateFeatureItems(index);
            this.resetAutoPlay();
          });
        });

        // Start auto-play
        this.startAutoPlay();

        // Pause auto-play on hover
        this.container.addEventListener('mouseenter', () => {
          this.stopAutoPlay();
        });

        this.container.addEventListener('mouseleave', () => {
          this.startAutoPlay();
        });
      }

      goToSlide(index: number) {
        // Hide all slides
        this.slides.forEach((slide: HTMLElement) => {
          slide.style.opacity = '0';
        });

        // Show target slide
        this.slides[index].style.opacity = '1';
        
        this.currentIndex = index;
      }

      updateFeatureItems(activeIndex: number) {
        // Remove active class from all feature items in this section
        this.featureItems.forEach((item: HTMLElement) => {
          item.classList.remove('active');
        });

        // Add active class to target feature item
        if (this.featureItems[activeIndex]) {
          this.featureItems[activeIndex].classList.add('active');
        }
      }

      nextSlide() {
        const nextIndex = (this.currentIndex + 1) % this.slides.length;
        this.goToSlide(nextIndex);
        this.updateFeatureItems(nextIndex);
      }

      startAutoPlay() {
        this.autoPlayInterval = window.setInterval(() => {
          this.nextSlide();
        }, this.autoPlayDelay);
      }

      stopAutoPlay() {
        if (this.autoPlayInterval) {
          clearInterval(this.autoPlayInterval);
          this.autoPlayInterval = null;
        }
      }

      resetAutoPlay() {
        this.stopAutoPlay();
        this.startAutoPlay();
      }
    }

    // Initialize all carousels
    document.querySelectorAll('.carousel-container').forEach(container => {
      new FeatureCarousel(container);
    });
  });
</script>
